<!--
@license
Copyright (c) 2016 Abdón Rodríguez Davila (@abdonrd). All rights reserved.
This code may only be used under the MIT style license found at https://abdonrd.github.io/LICENSE.txt
-->

<link rel="import" href="../polymer/polymer.html">

<!--
Polymer element to detecting device orientation.

Example to get the device orientation values:

```html
<device-orientation orientation="{{orientation}}"></device-orientation>
```

@demo demo/index.html
-->

<dom-module id="device-orientation">
  <script>
    Polymer({
      is: 'device-orientation',

      properties: {
        /**
         * The device orientation data.
         *
         * An object with the `absolute`, `alpha`, `beta` and `gamma` values.
         */
        orientation: {
          type: Object,
          notify: true
        }
      },

      attached: function() {
        if (window.DeviceOrientationEvent) {
          this._deviceorientationListener = this._handleOrientation.bind(this);
          window.addEventListener('deviceorientation', this._deviceorientationListener, true);
        } else {
          console.log('Your browser don´t support device orientation.');
        }
      },

      detached: function() {
        window.removeEventListener('deviceorientation', this._deviceorientationListener);
      },

      _handleOrientation: function(event) {
        this.set('orientation', {
          absolute: event.absolute,
          alpha: event.alpha,
          beta: event.beta,
          gamma: event.gamma
        });
      }
    });
  </script>
</dom-module>
